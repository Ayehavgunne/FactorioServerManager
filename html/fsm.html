<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>FSM</title>
		<meta name="msapplication-config" content="/browserconfig.xml"/>
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="manifest" href="/manifest.json">
		<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#fc6b1a">
		<meta name="theme-color" content="#f05b1b">
		<link href="/css/fsm.css" rel="stylesheet" type="text/css">
		<script src="/js/util.js" type="text/javascript"></script>
		<script src="/js/fsm.js" type="text/javascript"></script>
	</head>
	<body>
		<header>
			<div id="greeting">Hello {username}!</div>
			<label id="selected_game_label">Current Game <select id="selected_game">{games}</select></label>
			<form id="logout_form" method="post" action="/auth/logout">
				<input id="logout_button" type="submit" value="Log Out"/>
			</form>
			<button id="restart_fsm" data-url="restart_server">Restart FSM</button>
			<div id="title">Factorio <span id="title_label">Status</span></div>
		</header>
		<nav>
			<ul id="nav_links">
				<li id="status_nav" class="selected_nav">Status</li>
				<li id="console_nav">Console</li>
				<li id="mods_nav">Mods</li>
				<li id="config_nav">Configuration</li>
			</ul>
		</nav>
		<main>
			<section id="status_sec">
				<div>Current Version: <span id="current_version"></span></div>
				<div>
					<span id="game_status"></span>&nbsp;
					<span id="game_pid"></span>&nbsp;
					<span id="game_cpu"></span>&nbsp;
					<span id="game_mem"></span>&nbsp;
					<span id="total_mem"></span>&nbsp;
					<span id="available_mem"></span>
				</div>
				<button id="start_my_game" class="action" data-url="factorio/`current_game`/start">
					Start <span class="game_name"></span>
				</button>
				<button id="stop_my_game" class="action" data-url="factorio/`current_game`/stop">
					Stop <span class="game_name"></span>
				</button>
				<button id="status_my_game" class="action" data-url="factorio/`current_game`/status">
					<span class="game_name"></span> Status
				</button>
				<button id="check_for_update" data-url="factorio/`current_game`/check_for_update">
					Check for Updates
				</button>
				<div id="update_available" class="hidden">
					Version <span id="update_version"></span> is available!
					<button id="get_update" data-url="factorio/`current_game`/update?version=`version`">Update Now</button>
				</div>
			</section>
			<section id="console_sec" class="hidden">
				<div id="console_box"></div>
			</section>
			<section id="mods_sec" class="hidden">TODO mods</section>
			<section id="config_sec" class="hidden">TODO configs</section>
		</main>
		<div id="overlay" class="hidden"><div id="overlay_cell"><div id="overlay_msg"></div></div></div>
	</body>
</html>